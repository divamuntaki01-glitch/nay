<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Game Cacing Modern</title>
<style>
body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle, #0f2027, #203a43, #2c5364);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: Arial, sans-serif;
  color: white;
}

.game {
  text-align: center;
}

canvas {
  background: #000;
  border-radius: 16px;
  box-shadow: 0 0 20px #00ffcc;
}

.info {
  display: flex;
  justify-content: space-between;
  margin: 10px 0;
  font-size: 18px;
}

.controls {
  margin-top: 10px;
}

.controls button {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: none;
  margin: 5px;
  font-size: 20px;
  background: #00ffcc;
  color: #003;
  font-weight: bold;
}
</style>
</head>

<body>
<div class="game">
  <h2>üêç Game Cacing</h2>
  <div class="info">
    <div>Skor: <span id="score">0</span></div>
    <div>High: <span id="high">0</span></div>
  </div>

  <canvas id="game" width="320" height="320"></canvas>

  <!-- Kontrol HP -->
  <div class="controls">
    <div>
      <button onclick="setDir(0,-1)">‚¨Ü</button>
    </div>
    <div>
      <button onclick="setDir(-1,0)">‚¨Ö</button>
      <button onclick="setDir(1,0)">‚û°</button>
    </div>
    <div>
      <button onclick="setDir(0,1)">‚¨á</button>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const box = 16;
const size = canvas.width / box;

let snake, food, dir, score;
let high = localStorage.getItem("snakeHigh") || 0;
document.getElementById("high").innerText = high;

function start() {
  snake = [{x:8,y:8}];
  dir = {x:1,y:0};
  score = 0;
  document.getElementById("score").innerText = score;
  food = spawnFood();
}

function spawnFood() {
  return {
    x: Math.floor(Math.random()*size),
    y: Math.floor(Math.random()*size)
  };
}

function setDir(x,y) {
  if (dir.x + x === 0 && dir.y + y === 0) return;
  dir = {x,y};
}

document.addEventListener("keydown", e => {
  if (e.key === "ArrowUp") setDir(0,-1);
  if (e.key === "ArrowDown") setDir(0,1);
  if (e.key === "ArrowLeft") setDir(-1,0);
  if (e.key === "ArrowRight") setDir(1,0);
});

function gameLoop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  let head = {
    x: snake[0].x + dir.x,
    y: snake[0].y + dir.y
  };

  if (
    head.x < 0 || head.y < 0 ||
    head.x >= size || head.y >= size ||
    snake.some(s => s.x === head.x && s.y === head.y)
  ) {
    if (score > high) {
      high = score;
      localStorage.setItem("snakeHigh", high);
      document.getElementById("high").innerText = high;
    }
    alert("Game Over!");
    start();
    return;
  }

  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    score++;
    document.getElementById("score").innerText = score;
    food = spawnFood();
  } else {
    snake.pop();
  }

  // Food
  ctx.fillStyle = "#ff0055";
  ctx.shadowBlur = 10;
  ctx.shadowColor = "#ff0055";
  ctx.fillRect(food.x*box, food.y*box, box, box);

  // Snake
  ctx.shadowBlur = 10;
  ctx.shadowColor = "#00ffcc";
  snake.forEach((s,i) => {
    ctx.fillStyle = i===0 ? "#00ffcc" : "#00cc99";
    ctx.fillRect(s.x*box, s.y*box, box, box);
  });

  ctx.shadowBlur = 0;
}

start();
setInterval(gameLoop, 120);
</script>
</body>
</html>